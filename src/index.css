
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light mode - improved contrast */
    --background: 40 100% 97%;
    --foreground: 20 10% 10%; /* Darker text for better contrast */

    --card: 40 70% 98%;
    --card-foreground: 20 10% 10%; /* Darker text */

    --popover: 40 70% 98%;
    --popover-foreground: 20 10% 10%; /* Darker text */

    --primary: 43 100% 50%;
    --primary-foreground: 20 10% 10%; /* Darker text */

    --secondary: 41 85% 45%; /* Stronger secondary color */
    --secondary-foreground: 40 100% 99%; /* Higher contrast */

    --muted: 40 20% 88%; /* More distinct muted background */
    --muted-foreground: 20 10% 30%; /* Better readable muted text */

    --accent: 41 80% 88%;
    --accent-foreground: 20 10% 10%;

    --destructive: 0 90% 60%; /* More vibrant destructive */
    --destructive-foreground: 40 100% 99%; /* Higher contrast */

    --border: 40 30% 82%; /* More visible borders */
    --input: 40 30% 82%;
    --ring: 43 100% 45%; /* Stronger focus ring */

    --radius: 0.5rem;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5% 20%;
    --sidebar-primary: 240 6% 8%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 5% 94%;
    --sidebar-accent-foreground: 240 6% 8%;
    --sidebar-border: 220 13% 88%;
    --sidebar-ring: 217 92% 58%;
  }

  .dark {
    /* Dark mode - improved contrast */
    --background: 20 10% 8%; /* Darker background */
    --foreground: 40 30% 95%; /* Brighter text */

    --card: 20 10% 10%;
    --card-foreground: 40 30% 95%; /* Brighter text */

    --popover: 20 10% 10%;
    --popover-foreground: 40 30% 95%; /* Brighter text */

    --primary: 43 100% 55%; /* Brighter primary */
    --primary-foreground: 20 10% 8%; /* Darker background text */

    --secondary: 41 85% 55%; /* Brighter secondary */
    --secondary-foreground: 20 10% 8%; /* Darker background text */

    --muted: 20 10% 16%; /* More distinct muted */
    --muted-foreground: 40 30% 80%; /* Brighter muted text */

    --accent: 20 10% 16%;
    --accent-foreground: 40 30% 95%; /* Brighter text */

    --destructive: 0 70% 35%; /* More noticeable destructive */
    --destructive-foreground: 40 30% 95%; /* Brighter text */

    --border: 20 10% 18%; /* More visible borders */
    --input: 20 10% 18%;
    --ring: 43 100% 60%; /* Brighter focus ring */

    --sidebar-background: 240 6% 8%;
    --sidebar-foreground: 240 5% 98%;
    --sidebar-primary: 224 76% 52%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 4% 18%;
    --sidebar-accent-foreground: 240 5% 98%;
    --sidebar-border: 240 4% 18%;
    --sidebar-ring: 217 91% 62%;
  }
  
  /* Dynamic mode - enhances whatever the base theme is */
  .dynamic.light {
    /* Enhanced light mode with purple tint overlay */
    --gradient-overlay: linear-gradient(102.3deg, rgba(147,39,143,0.2) 5.9%, rgba(234,172,232,0.15) 64%, rgba(246,219,245,0.12) 89%);
    --focus-outline-color: rgba(147,39,143,0.6);
    
    /* Apply higher contrast to text on top of the base theme */
    --foreground: 20 10% 5%; /* Even darker text for dynamic light */
    --muted-foreground: 20 10% 25%; /* Stronger muted text */
    --card-foreground: 20 10% 5%;
    --accent-foreground: 20 10% 5%;
    
    /* Increase color vibrancy */
    --primary: 43 100% 47%; /* More saturated primary */
    --secondary: 41 90% 45%; /* More saturated secondary */
    --ring: 43 100% 40%; /* Stronger ring */
  }
  
  .dynamic.dark {
    /* Enhanced dark mode with purple tint overlay */
    --gradient-overlay: linear-gradient(90deg, hsla(277, 75%, 84%, 0.2) 0%, hsla(297, 50%, 51%, 0.15) 100%);
    --focus-outline-color: hsla(297, 60%, 70%, 0.6);
    
    /* Apply higher contrast to text on top of the base theme */
    --foreground: 40 30% 98%; /* Even brighter text for dynamic dark */
    --muted-foreground: 40 30% 85%; /* Stronger muted text */
    --card-foreground: 40 30% 98%;
    --accent-foreground: 40 30% 98%;
    
    /* Increase color vibrancy */
    --primary: 43 100% 60%; /* More vibrant primary */
    --secondary: 41 90% 60%; /* More vibrant secondary */
    --ring: 43 100% 65%; /* Brighter ring */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }
  
  /* Dynamic overlay with z-index management */
  .dynamic body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--gradient-overlay);
    pointer-events: none;
    z-index: 1;
  }
  
  /* Ensure content appears above the gradient overlay */
  .dynamic main, 
  .dynamic header, 
  .dynamic footer, 
  .dynamic dialog, 
  .dynamic [role="dialog"] {
    position: relative;
    z-index: 2;
  }
  
  /* Enhanced focus states for dynamic mode */
  .dynamic :focus-visible {
    outline: 3px solid var(--focus-outline-color);
    outline-offset: 2px;
  }
  
  /* Responsive adjustments for dynamic mode */
  @media (max-width: 640px) {
    .dynamic.light {
      --gradient-overlay: linear-gradient(135deg, rgba(147,39,143,0.25) 15%, rgba(234,172,232,0.2) 85%);
    }
    
    .dynamic.dark {
      --gradient-overlay: linear-gradient(135deg, hsla(277, 75%, 84%, 0.25) 15%, hsla(297, 50%, 51%, 0.2) 85%);
    }
  }
  
  /* Print handling for dynamic mode */
  @media print {
    .dynamic body::before {
      display: none;
    }
  }
  
  /* Accessibility considerations */
  @media (prefers-reduced-motion: reduce) {
    .dynamic * {
      transition-duration: 0.01ms !important;
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
    }
  }
}

@layer components {
  /* Honeycomb components */
  .hex {
    @apply relative inline-block;
    width: 100px;
    height: 57.74px;
    margin: 28.87px 0;
    background-color: theme('colors.bee.amber');
    position: relative;
  }
  
  .hex:before,
  .hex:after {
    @apply absolute w-0 h-0 border-solid;
    content: "";
    border-width: 0 50px 28.87px 50px;
  }
  
  .hex:before {
    bottom: 100%;
    border-color: transparent transparent theme('colors.bee.amber') transparent;
  }
  
  .hex:after {
    top: 100%;
    border-color: theme('colors.bee.amber') transparent transparent transparent;
  }

  /* Glass card effect with better contrast in all modes */
  .glass-card {
    @apply bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg rounded-lg shadow-lg border border-white border-opacity-25;
  }

  /* Dynamic mode enhanced glass card */
  .dynamic .glass-card {
    @apply border-opacity-30 shadow-xl;
  }

  .honeycomb-pattern {
    background-color: #f9f6ee;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='104' viewBox='0 0 60 104' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 52-30 52L0 52 30 0z' fill='%23FFBF00' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
  }
  
  /* Additional contrast enhancement for dynamic mode buttons */
  .dynamic .btn-primary {
    @apply shadow-md;
  }
  
  /* Stronger visual indication for interactive elements in dynamic mode */
  .dynamic button:hover,
  .dynamic a:hover {
    @apply shadow-md;
  }
}
